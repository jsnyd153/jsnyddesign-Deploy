<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta content="IE=edge" http-equiv="X-UA-Compatible" />
		<meta content="width=device-width, initial-scale=1" name="viewport" />
		<title>app test page</title>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;500;600;700;900&display=swap"
			rel="stylesheet"
		/>
		<link
			rel="stylesheet"
			href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
		/>

		<link rel="stylesheet" href="css/components/inputs/_index.css" />
		<link rel="stylesheet" href="css/components/buttons/_index.css" />
		<link rel="stylesheet" href="css/components/content/_index.css" />
		<link rel="stylesheet" href="css/components/cards/_index.css" />
		<link rel="stylesheet" href="css/blocks/navigation/nav_bar.css" />
		<link rel="stylesheet" href="css/blocks/schedule/_index.css" />
		<link rel="stylesheet" href="css/globals/globals.css" />
		<link rel="stylesheet" href="css/components/modals/modal.css" />
	</head>

	<body class="player_page" pool="A">
		<header>
			<h1>Pool A</h1>
		</header>
		<nav class="main_nav">
			<div class="main_nav--controls horizontal">
				<div class="dropdown_input modal_trigger" modal_ID="POOL_1A">
					<div class="dropdown_input--label">
						<span>Jeremy Snyder</span>
					</div>
					<svg class="dropdown_input--carrot" viewBox="0 0 12 8">
						<path d="M6 7.5L0.803847 0.75L11.1962 0.750001L6 7.5Z" />
					</svg>
				</div>
				<div class="button_container">
					<button class="icon_button"><i>home</i></button>
					<button class="icon_button"><i>leaderboard</i></button>
					<button class="icon_button"><i>social_leaderboard</i></button>
				</div>
			</div>

			<svg viewBox="0 0 375 30" class="arc" xmlns="http://www.w3.org/2000/svg">
				<path
					d="M166.726 30C108.823 28.0508 52.9051 17.9834 0 0.862466V0H375V0.862454C322.095 17.9834 266.177 28.0508 208.274 30H166.726Z"
				/>
			</svg>
		</nav>

		<div class="player_overview">
			<div class="profile_image large">
				<span></span>
				<img src="" alt="currentName" />
			</div>
			<div class="player_overview--scores">
				<div class="score_total" data="total"><span></span>-<span></span></div>
				<div class="score_total" data="diff">
					<span></span>
				</div>
			</div>
		</div>

		<main id="player_schedule"></main>

		<div class="modal" modal_active="false">
			<div class="modal--back"></div>
			<div class="modal_bottom" modal_active="false" id="POOL_1A">
				<div class="modal_bottom--handle"></div>
				<div class="modal_bottom--content">
					<ul class="modal_bottom--player_list" data="pool_1000A"></ul>
				</div>
			</div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

		<script>
			function setPlayerIDFromURL() {
				const url = window.location.href;
				const pageID = url.split("#").pop();

				if (pageID) {
					const pageLabelAlpha = pageID.match(/[a-zA-Z]+/);
					const pageLabelNum = pageID.match(/\d+/);

					if (pageLabelAlpha && pageLabelNum) {
						$("body").attr("id", pageLabelNum[0]);
						$("body").attr("playerNumber", pageLabelNum[0]);
						$("body").attr("pool", pageLabelAlpha[0]);
					} else {
						$("body").attr("id", "A1");
						$("body").attr("playerNumber", "1");
						$("body").attr("pool", "A");
					}
				}
			}
		</script>
		<script src="js/playerData.js"></script>
		<!-- <script src="js/sheetToPlayerData.js"></script> -->
		<!-- Creates content inside the modal based on array of players-->
		<script src="js/generatePlayerModal.js"></script>
		<!-- changes/generates the plater data-->
		<script src="js/generatePlayerProfile.js"></script>
		<!-- need to generate the schedule -->
		<script src="js/generateSchedule.js"></script>
		<!-- need to generate the schedule -->
		<script src="js/modal.js"></script>
		<!-- 
		<script src="js/data.js"></script> -->

		<script>
			setCurrentItem();
			refreshPageContent();

			function refreshPageContent() {
				setPlayerIDFromURL();
				generatePlayerProfile();
				mapAndFilterMatches();
				closeModal();
			}

			function setCurrentItem() {
				$(".name_card").each(function () {
					if ($(this).attr("playernumber") == $("body").attr("playernumber")) {
						$(this).addClass("current");
					} else {
						$(this).removeClass("current");
					}
				});
			}

			$(".name_card").click(function () {
				//add delay so the new url is already there when it executes
				setTimeout(refreshPageContent, 100);
				setTimeout(setCurrentItem, 100);
			});
		</script>
	</body>
</html>
